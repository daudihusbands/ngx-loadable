<div class="wrapper">
  <h1>Advanced</h1>

  <h2>Elements configured in a feature module</h2>
  <div class="content">
    <div class="implementation" *ngIf="!example1">
      <button mat-flat-button color="primary" (click)="example1 = true">
        <mat-icon>play_arrow</mat-icon>
        Show
      </button>
    </div>
    <div [class.implementation]="example1">
      <ngx-loadable module="card" [show]="example1"></ngx-loadable>
    </div>
    <div class="description">
      <p>
        In this example we're pre-configuring
        <code>LoadableModule</code> with the element config. That way we
        don't have to specify loading template, error template and other configuration of the element in the
        <code>ngx-loadable</code> component. The module will be lazy-loaded
        the same way as before.
      </p>
      <pre [highlight]="codeExample1html"></pre>
      <pre [highlight]="codeExample1module"></pre>
    </div>
  </div>

  <h2>Elements configured in a feature module with HTML inline options</h2>
  <div class="content">
    <div class="implementation" *ngIf="!example2">
      <button mat-flat-button color="primary" (click)="example2 = true">
        <mat-icon>play_arrow</mat-icon>
        Show
      </button>
    </div>
    <div [class.implementation]="example2">
      <ngx-loadable module="expansion" [show]="example2">
        <ng-template #loading>Loading...</ng-template>
      </ngx-loadable>
    </div>
    <div class="description">
      <p>
        We don't have to specify <code>url</code> when using pre-configured
        <code>LoadableModule</code>. We still might need to pass in
        <code>null</code> url into <code>ngx-loadable</code> component in case
        we want to use other options like <code>module</code> or
        <code>loadingTemplate</code>.
      </p>
      <pre [highlight]="codeExample2html"></pre>
      <pre [highlight]="codeExample2module"></pre>
    </div>
  </div>

  <h2>
    Elements configured in a feature module with <code>isElement</code> option
  </h2>
  <div class="content">
    <div class="implementation" *ngIf="!example3">
      <button mat-flat-button color="primary" (click)="example3 = true">
        <mat-icon>play_arrow</mat-icon>
        Show
      </button>
    </div>
    <div [class.implementation]="example3">

    </div>
    <div class="description">
      <p>
        We can also pre-configure <code>isElement</code> flag by passing it to
        the <code>LoadableModule</code>config. That way we don't have to
        specify it in the template for module style elements!
      </p>
      <pre [highlight]="codeExample3html"></pre>
      <pre [highlight]="codeExample3module"></pre>
    </div>
  </div>

  <h2>
    Elements configured in <code>AppModule</code> or
    <code>CoreModule</code> using <code>forRoot</code>
  </h2>
  <div class="content">
    <div class="implementation" *ngIf="!example4">
      <button mat-flat-button color="primary" (click)="example4 = true">
        <mat-icon>play_arrow</mat-icon>
        Show
      </button>
    </div>
    <div [class.implementation]="example4">
      <ngx-loadable module="app-element-test" [show]="example4"></ngx-loadable>
    </div>
    <div class="description">
      <p>
        Some options can be pre-configured for the whole application using
        <code>LoadableModule.forRoot()</code>. This is usually done in
        <code>AppModule</code> or in the <code>CoreModule</code>. That way we
        don't have to specify this options in the feature modules while still
        preserving posibility to override them if necessary. The
        <code>forRoot()</code> accepts also <code>elementConfigs</code> so they
        can be pre-configured centrally removing the need to configure them in
        feature modules or inline in the templates.
      </p>
      <pre [highlight]="codeExample4html"></pre>
      <pre [highlight]="codeExample4coreModule"></pre>
    </div>
  </div>

  <h2>
    Preloading with service
  </h2>
  <div class="content">
    <div class="implementation">
      <div>
        <button mat-flat-button color="primary" (click)="preload()">
          Preload Everything
        </button>
        <button class="additional-btn" mat-flat-button color="primary" (click)="preloadBreach()">
          Preload "Breach" only (the next example)
        </button>
      </div>
    </div>
    <div class="description">
      <p>
        You can inject <code>LoadableService</code> and call the
        <code>preload</code> method to preload all the configured modules, or
        specify the list of module <code>names</code> you want to preload.
      </p>
      <pre [highlight]="codeExample5html"></pre>
      <pre [highlight]="codeExample5ts"></pre>
    </div>
  </div>

  <h2>
    Preloading with ngx-loadable Component <code color="primary" *ngIf="breachModule.loaded">Loaded</code>
  </h2>
  <div class="content">
    <div class="implementation">
      <button *ngIf="!showBreach" mat-raised-button color="primary" (mouseover)="breachModule.preload()"
        (click)="showBreach = true">Hover to load/ Click to show</button>
      <ngx-loadable style="width: 100%" #breachModule module="app-breach" [show]="showBreach"></ngx-loadable>
    </div>
    <div class="description">
      <p>
        You can use local variable to access <code>LoadableComponent</code> and call the
        <code>preload</code> method to preload the module passed to the component.
      </p>
      <pre [highlight]="codeExample6html"></pre>
    </div>
  </div>

  <h2>
    Passing Input and Outputs to loaded Component <code color="primary" *ngIf="lazyModule?.loaded">Loaded</code>
  </h2>
  <div class="content">
    <div class="implementation">
      <button mat-flat-button color="primary" (click)="example7 = true">
        <mat-icon>play_arrow</mat-icon>
        Show
      </button>        
    <ngx-loadable #lazyModule module="lazy-example-7" [show]="example7" (init)="lazyInit($event)"></ngx-loadable>
    </div>
    <div class="description">
      <p>
        Use <code>(init)</code> output to access that components inputs and outputs
      </p>
      <pre [highlight]="codeExample7html"></pre>
      <pre [highlight]="codeExample7ts"></pre>    
    </div>
  </div>
</div>
